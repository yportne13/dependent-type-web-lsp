"use strict";/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ue=["require","exports","vs/base/common/path","vs/base/common/platform","vs/base/common/strings","vs/base/common/extpath","vs/base/common/charCode","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/lazy","vs/base/common/arrays","vs/base/common/map","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],he=function(Q){for(var e=[],k=0,b=Q.length;k<b;k++)e[k]=ue[Q[k]];return e};define(ue[11],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ie=void 0,e.$ie=Symbol("MicrotaskDelay")}),define(ue[5],he([0,1,6,2,3,4,17]),function(Q,e,k,b,R,g,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$yg=P,e.$zg=K,e.$Ag=L,e.$Bg=W,e.$Cg=Y,e.$Dg=n,e.$Eg=c,e.$Fg=d,e.$Gg=M,e.$Hg=f,e.$Ig=O,e.$Jg=J,e.$Kg=y,e.$Lg=F,e.$Mg=S,e.$Ng=H,e.$Og=V;function P(s){return s===k.CharCode.Slash||s===k.CharCode.Backslash}function K(s){return s.replace(/[\\/]/g,b.$jc.sep)}function L(s){return s.indexOf("/")===-1&&(s=K(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}function W(s,$=b.$jc.sep){if(!s)return"";const B=s.length,q=s.charCodeAt(0);if(P(q)){if(P(s.charCodeAt(1))&&!P(s.charCodeAt(2))){let U=3;const p=U;for(;U<B&&!P(s.charCodeAt(U));U++);if(p!==U&&!P(s.charCodeAt(U+1))){for(U+=1;U<B;U++)if(P(s.charCodeAt(U)))return s.slice(0,U+1).replace(/[\\/]/g,$)}}return $}else if(M(q)&&s.charCodeAt(1)===k.CharCode.Colon)return P(s.charCodeAt(2))?s.slice(0,2)+$:s.slice(0,2);let X=s.indexOf("://");if(X!==-1){for(X+=3;X<B;X++)if(P(s.charCodeAt(X)))return s.slice(0,X+1)}return""}function Y(s){if(!R.$i||!s||s.length<5)return!1;let $=s.charCodeAt(0);if($!==k.CharCode.Backslash||($=s.charCodeAt(1),$!==k.CharCode.Backslash))return!1;let B=2;const q=B;for(;B<s.length&&($=s.charCodeAt(B),$!==k.CharCode.Backslash);B++);return!(q===B||($=s.charCodeAt(B+1),isNaN($)||$===k.CharCode.Backslash))}const G=/[\\/:\*\?"<>\|]/g,te=/[/]/g,l=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function n(s,$=R.$i){const B=$?G:te;return!(!s||s.length===0||/^\s+$/.test(s)||(B.lastIndex=0,B.test(s))||$&&l.test(s)||s==="."||s===".."||$&&s[s.length-1]==="."||$&&s.length!==s.trim().length||s.length>255)}function c(s,$,B){const q=s===$;return!B||q?q:!s||!$?!1:(0,g.$Hf)(s,$)}function d(s,$,B,q=b.sep){if(s===$)return!0;if(!s||!$||$.length>s.length)return!1;if(B){if(!(0,g.$If)(s,$))return!1;if($.length===s.length)return!0;let U=$.length;return $.charAt($.length-1)===q&&U--,s.charAt(U)===q}return $.charAt($.length-1)!==q&&($+=q),s.indexOf($)===0}function M(s){return s>=k.CharCode.A&&s<=k.CharCode.Z||s>=k.CharCode.a&&s<=k.CharCode.z}function f(s,$){return R.$i&&s.endsWith(":")&&(s+=b.sep),(0,b.$lc)(s)||(s=(0,b.$mc)($,s)),s=(0,b.$kc)(s),O(s)}function O(s){return R.$i?(s=(0,g.$pf)(s,b.sep),s.endsWith(":")&&(s+=b.sep)):(s=(0,g.$pf)(s,b.sep),s||(s=b.sep)),s}function J(s){const $=(0,b.$kc)(s);return R.$i?s.length>3?!1:y($)&&(s.length===2||$.charCodeAt(2)===k.CharCode.Backslash):$===b.$jc.sep}function y(s,$=R.$i){return $?M(s.charCodeAt(0))&&s.charCodeAt(1)===k.CharCode.Colon:!1}function F(s,$=R.$i){return y(s,$)?s[0]:void 0}function S(s,$,B){return $.length>s.length?-1:s===$?0:(B&&(s=s.toLowerCase(),$=$.toLowerCase()),s.indexOf($))}function H(s){const $=s.split(":");let B,q,X;for(const U of $){const p=Number(U);(0,E.$kg)(p)?q===void 0?q=p:X===void 0&&(X=p):B=B?[B,U].join(":"):U}if(!B)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:B,line:q!==void 0?q:void 0,column:X!==void 0?X:q!==void 0?1:void 0}}const ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",_="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function V(s,$,B=8){let q="";for(let U=0;U<B;U++){let p;U===0&&R.$i&&!$&&(B===3||B===4)?p=_:p=ee,q+=p.charAt(Math.floor(Math.random()*p.length))}let X;return $?X=`${$}-${q}`:X=q,s?(0,b.$mc)(s,X):X}});var $e=this&&this.__createBinding||(Object.create?function(Q,e,k,b){b===void 0&&(b=k);var R=Object.getOwnPropertyDescriptor(e,k);(!R||("get"in R?!e.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return e[k]}}),Object.defineProperty(Q,b,R)}:function(Q,e,k,b){b===void 0&&(b=k),Q[b]=e[k]}),me=this&&this.__setModuleDefault||(Object.create?function(Q,e){Object.defineProperty(Q,"default",{enumerable:!0,value:e})}:function(Q,e){Q.default=e}),de=this&&this.__importStar||function(Q){if(Q&&Q.__esModule)return Q;var e={};if(Q!=null)for(var k in Q)k!=="default"&&Object.prototype.hasOwnProperty.call(Q,k)&&$e(e,Q,k);return me(e,Q),e};define(ue[12],he([0,1,13,3,4,7,2]),function(Q,e,k,b,R,g,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.$1g=e.$Zg=e.$Yg=e.$Xg=e.$Wg=e.$Vg=e.$Tg=e.$Sg=e.$Rg=e.Schemas=void 0,e.$Pg=K,e.$Qg=L,e.$Ug=Y,k=de(k),b=de(b),E=de(E);var P;(function(l){l.inMemory="inmemory",l.vscode="vscode",l.internal="private",l.walkThrough="walkThrough",l.walkThroughSnippet="walkThroughSnippet",l.http="http",l.https="https",l.file="file",l.mailto="mailto",l.untitled="untitled",l.data="data",l.command="command",l.vscodeRemote="vscode-remote",l.vscodeRemoteResource="vscode-remote-resource",l.vscodeManagedRemoteResource="vscode-managed-remote-resource",l.vscodeUserData="vscode-userdata",l.vscodeCustomEditor="vscode-custom-editor",l.vscodeNotebookCell="vscode-notebook-cell",l.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",l.vscodeNotebookCellOutput="vscode-notebook-cell-output",l.vscodeInteractiveInput="vscode-interactive-input",l.vscodeSettings="vscode-settings",l.vscodeWorkspaceTrust="vscode-workspace-trust",l.vscodeTerminal="vscode-terminal",l.vscodeChatCodeBlock="vscode-chat-code-block",l.vscodeCopilotBackingChatCodeBlock="vscode-copilot-chat-code-block",l.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",l.vscodeChatSesssion="vscode-chat-editor",l.webviewPanel="webview-panel",l.vscodeWebview="vscode-webview",l.extension="extension",l.vscodeFileResource="vscode-file",l.tmp="tmp",l.vsls="vsls",l.vscodeSourceControl="vscode-scm",l.commentsInput="comment",l.codeSetting="code-setting"})(P||(e.Schemas=P={}));function K(l,n){return g.URI.isUri(l)?(0,R.$Hf)(l.scheme,n):(0,R.$If)(l,n+":")}function L(l,...n){return n.some(c=>K(l,c))}e.$Rg="vscode-tkn",e.$Sg="tkn";class W{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(n){this.d=n}setDelegate(n){this.e=n}setServerRootPath(n,c){this.f=Y(n,c)}getServerRootPath(){return this.f}get g(){return E.$jc.join(this.f,P.vscodeRemoteResource)}set(n,c,d){this.a[n]=c,this.b[n]=d}setConnectionToken(n,c){this.c[n]=c}getPreferredWebSchema(){return this.d}rewrite(n){if(this.e)try{return this.e(n)}catch(J){return k.$3(J),n}const c=n.authority;let d=this.a[c];d&&d.indexOf(":")!==-1&&d.indexOf("[")===-1&&(d=`[${d}]`);const M=this.b[c],f=this.c[c];let O=`path=${encodeURIComponent(n.path)}`;return typeof f=="string"&&(O+=`&${e.$Sg}=${encodeURIComponent(f)}`),g.URI.from({scheme:b.$o?this.d:P.vscodeRemoteResource,authority:`${d}:${M}`,path:this.g,query:O})}}e.$Tg=new W;function Y(l,n){return E.$jc.join(n??"/",`${l.quality??"oss"}-${l.commit??"dev"}`)}e.$Vg="vs/../../extensions",e.$Wg="vs/../../node_modules",e.$Xg="vs/../../node_modules.asar",e.$Yg="vs/../../node_modules.asar.unpacked",e.$Zg="vscode-app";class G{static{this.a=e.$Zg}asBrowserUri(n){const c=this.b(n,Q);return this.uriToBrowserUri(c)}uriToBrowserUri(n){return n.scheme===P.vscodeRemote?e.$Tg.rewrite(n):n.scheme===P.file&&(b.$m||b.$q===`${P.vscodeFileResource}://${G.a}`)?n.with({scheme:P.vscodeFileResource,authority:n.authority||G.a,query:null,fragment:null}):n}asFileUri(n){const c=this.b(n,Q);return this.uriToFileUri(c)}uriToFileUri(n){return n.scheme===P.vscodeFileResource?n.with({scheme:P.file,authority:n.authority!==G.a?n.authority:null,query:null,fragment:null}):n}b(n,c){return g.URI.isUri(n)?n:g.URI.parse(c.toUrl(n))}}e.$1g=new G;var te;(function(l){const n=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);l.CoopAndCoep=Object.freeze(n.get("3"));const c="vscode-coi";function d(f){let O;typeof f=="string"?O=new URL(f).searchParams:f instanceof URL?O=f.searchParams:g.URI.isUri(f)&&(O=new URL(f.toString(!0)).searchParams);const J=O?.get(c);if(J)return n.get(J)}l.getHeadersFromQuery=d;function M(f,O,J){if(!globalThis.crossOriginIsolated)return;const y=O&&J?"3":J?"2":"1";f instanceof URLSearchParams?f.set(c,y):f[c]=y}l.addSearchParam=M})(te||(e.COI=te={}))}),define(ue[8],he([0,1,6,5,12,2,3,4,7]),function(Q,e,k,b,R,g,E,P,K){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataUri=e.$ph=e.$oh=e.$nh=e.$mh=e.$lh=e.$kh=e.$jh=e.$ih=e.$hh=e.$gh=e.$fh=e.$eh=e.$dh=e.$ch=e.$bh=e.$ah=e.$_g=e.$$g=e.$0g=e.$9g=void 0,e.$8g=L,e.$qh=Y,e.$rh=te,b=de(b),g=de(g);function L(l){return(0,K.$zc)(l,!0)}class W{constructor(n){this.a=n}compare(n,c,d=!1){return n===c?0:(0,P.$Af)(this.getComparisonKey(n,d),this.getComparisonKey(c,d))}isEqual(n,c,d=!1){return n===c?!0:!n||!c?!1:this.getComparisonKey(n,d)===this.getComparisonKey(c,d)}getComparisonKey(n,c=!1){return n.with({path:this.a(n)?n.path.toLowerCase():void 0,fragment:c?null:void 0}).toString()}ignorePathCasing(n){return this.a(n)}isEqualOrParent(n,c,d=!1){if(n.scheme===c.scheme){if(n.scheme===R.Schemas.file)return b.$Fg(L(n),L(c),this.a(n))&&n.query===c.query&&(d||n.fragment===c.fragment);if((0,e.$mh)(n.authority,c.authority))return b.$Fg(n.path,c.path,this.a(n),"/")&&n.query===c.query&&(d||n.fragment===c.fragment)}return!1}joinPath(n,...c){return K.URI.joinPath(n,...c)}basenameOrAuthority(n){return(0,e.$eh)(n)||n.authority}basename(n){return g.$jc.basename(n.path)}extname(n){return g.$jc.extname(n.path)}dirname(n){if(n.path.length===0)return n;let c;return n.scheme===R.Schemas.file?c=K.URI.file(g.$pc(L(n))).path:(c=g.$jc.dirname(n.path),n.authority&&c.length&&c.charCodeAt(0)!==k.CharCode.Slash&&(console.error(`dirname("${n.toString})) resulted in a relative path`),c="/")),n.with({path:c})}normalizePath(n){if(!n.path.length)return n;let c;return n.scheme===R.Schemas.file?c=K.URI.file(g.$kc(L(n))).path:c=g.$jc.normalize(n.path),n.with({path:c})}relativePath(n,c){if(n.scheme!==c.scheme||!(0,e.$mh)(n.authority,c.authority))return;if(n.scheme===R.Schemas.file){const f=g.$oc(L(n),L(c));return E.$i?b.$zg(f):f}let d=n.path||"/";const M=c.path||"/";if(this.a(n)){let f=0;for(const O=Math.min(d.length,M.length);f<O&&!(d.charCodeAt(f)!==M.charCodeAt(f)&&d.charAt(f).toLowerCase()!==M.charAt(f).toLowerCase());f++);d=M.substr(0,f)+d.substr(f)}return g.$jc.relative(d,M)}resolvePath(n,c){if(n.scheme===R.Schemas.file){const d=K.URI.file(g.$nc(L(n),c));return n.with({authority:d.authority,path:d.path})}return c=b.$Ag(c),n.with({path:g.$jc.resolve(n.path,c)})}isAbsolutePath(n){return!!n.path&&n.path[0]==="/"}isEqualAuthority(n,c){return n===c||n!==void 0&&c!==void 0&&(0,P.$Hf)(n,c)}hasTrailingPathSeparator(n,c=g.sep){if(n.scheme===R.Schemas.file){const d=L(n);return d.length>b.$Bg(d).length&&d[d.length-1]===c}else{const d=n.path;return d.length>1&&d.charCodeAt(d.length-1)===k.CharCode.Slash&&!/^[a-zA-Z]:(\/$|\\$)/.test(n.fsPath)}}removeTrailingPathSeparator(n,c=g.sep){return(0,e.$nh)(n,c)?n.with({path:n.path.substr(0,n.path.length-1)}):n}addTrailingPathSeparator(n,c=g.sep){let d=!1;if(n.scheme===R.Schemas.file){const M=L(n);d=M!==void 0&&M.length===b.$Bg(M).length&&M[M.length-1]===c}else{c="/";const M=n.path;d=M.length===1&&M.charCodeAt(M.length-1)===k.CharCode.Slash}return!d&&!(0,e.$nh)(n,c)?n.with({path:n.path+"/"}):n}}e.$9g=W,e.$0g=new W(()=>!1),e.$$g=new W(l=>l.scheme===R.Schemas.file?!E.$k:!0),e.$_g=new W(l=>!0),e.$ah=e.$0g.isEqual.bind(e.$0g),e.$bh=e.$0g.isEqualOrParent.bind(e.$0g),e.$ch=e.$0g.getComparisonKey.bind(e.$0g),e.$dh=e.$0g.basenameOrAuthority.bind(e.$0g),e.$eh=e.$0g.basename.bind(e.$0g),e.$fh=e.$0g.extname.bind(e.$0g),e.$gh=e.$0g.dirname.bind(e.$0g),e.$hh=e.$0g.joinPath.bind(e.$0g),e.$ih=e.$0g.normalizePath.bind(e.$0g),e.$jh=e.$0g.relativePath.bind(e.$0g),e.$kh=e.$0g.resolvePath.bind(e.$0g),e.$lh=e.$0g.isAbsolutePath.bind(e.$0g),e.$mh=e.$0g.isEqualAuthority.bind(e.$0g),e.$nh=e.$0g.hasTrailingPathSeparator.bind(e.$0g),e.$oh=e.$0g.removeTrailingPathSeparator.bind(e.$0g),e.$ph=e.$0g.addTrailingPathSeparator.bind(e.$0g);function Y(l,n){const c=[];for(let d=0;d<l.length;d++){const M=n(l[d]);l.some((f,O)=>O===d?!1:(0,e.$bh)(M,n(f)))||c.push(l[d])}return c}var G;(function(l){l.META_DATA_LABEL="label",l.META_DATA_DESCRIPTION="description",l.META_DATA_SIZE="size",l.META_DATA_MIME="mime";function n(c){const d=new Map;c.path.substring(c.path.indexOf(";")+1,c.path.lastIndexOf(";")).split(";").forEach(O=>{const[J,y]=O.split(":");J&&y&&d.set(J,y)});const f=c.path.substring(0,c.path.indexOf(";"));return f&&d.set(l.META_DATA_MIME,f),d}l.parseMetaData=n})(G||(e.DataUri=G={}));function te(l,n,c){if(n){let d=l.path;return d&&d[0]!==g.$jc.sep&&(d=g.$jc.sep+d),l.with({scheme:c,authority:n,path:d})}return l.with({scheme:c})}}),define(ue[9],he([0,1,14,13,18,19,8,3,11,20]),function(Q,e,k,b,R,g,E,P,K,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$0h=e.$8h=e.$7h=e.$6h=e.$5h=e.Promises=e.$4h=e.$3h=e.$2h=e.$Zh=e.$Yh=e.$Xh=e.$Wh=e.$Vh=e.$Uh=e.$Th=e.$Sh=e.$Rh=e.$Qh=e.$Ph=e.$Oh=e.$Nh=e.$Mh=e.$Gh=e.$Fh=e.$Eh=e.$Dh=e.$Ch=e.$Bh=e.$Ah=void 0,e.$sh=W,e.$th=Y,e.$uh=G,e.$vh=te,e.$wh=l,e.$xh=n,e.$yh=c,e.$zh=d,e.$Hh=_,e.$Ih=V,e.$Jh=s,e.$Kh=$,e.$Lh=B,e.$1h=m,e.$9h=se;function W(o){return!!o&&typeof o.then=="function"}function Y(o){const t=new k.$ye,i=o(t.token),r=new Promise((a,I)=>{const ne=t.token.onCancellationRequested(()=>{ne.dispose(),I(new b.$8)});Promise.resolve(i).then(le=>{ne.dispose(),t.dispose(),a(le)},le=>{ne.dispose(),t.dispose(),I(le)})});return new class{cancel(){t.cancel(),t.dispose()}then(a,I){return r.then(a,I)}catch(a){return this.then(void 0,a)}finally(a){return r.finally(a)}}}function G(o,t,i){return new Promise((r,a)=>{const I=t.onCancellationRequested(()=>{I.dispose(),r(i)});o.then(r,a).finally(()=>I.dispose())})}function te(o,t){return new Promise((i,r)=>{const a=t.onCancellationRequested(()=>{a.dispose(),r(new b.$8)});o.then(i,r).finally(()=>a.dispose())})}async function l(o){let t=-1;const i=o.map((r,a)=>r.then(I=>(t=a,I)));try{return await Promise.race(i)}finally{o.forEach((r,a)=>{a!==t&&r.cancel()})}}function n(o,t,i){let r;const a=setTimeout(()=>{r?.(void 0),i?.()},t);return Promise.race([o.finally(()=>clearTimeout(a)),new Promise(I=>r=I)])}function c(o){return new Promise((t,i)=>{const r=o();W(r)?r.then(t,i):t(r)})}function d(){let o,t;return{promise:new Promise((r,a)=>{o=r,t=a}),resolve:o,reject:t}}class M{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(t){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=t,!this.b){const i=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(i,i).then(r)})}return new Promise((i,r)=>{this.b.then(i,r)})}return this.a=t(),new Promise((i,r)=>{this.a.then(a=>{this.a=null,i(a)},a=>{this.a=null,r(a)})})}dispose(){this.f=!0}}e.$Ah=M;class f{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.$Bh=f;class O{constructor(){this.a=new Map}queue(t,i){const a=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(i).finally(()=>{this.a.get(t)===a&&this.a.delete(t)});return this.a.set(t,a),a}}e.$Ch=O;const J=(o,t)=>{let i=!0;const r=setTimeout(()=>{i=!1,t()},o);return{isTriggered:()=>i,dispose:()=>{clearTimeout(r),i=!1}}},y=o=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,o())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class F{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,i=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((a,I)=>{this.d=a,this.f=I}).then(()=>{if(this.b=null,this.d=null,this.g){const a=this.g;return this.g=null,a()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=i===K.$ie?y(r):J(i,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new b.$8),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.$Dh=F;class S{constructor(t){this.a=new F(t),this.b=new M}trigger(t,i){return this.a.trigger(()=>this.b.queue(t),i)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}}e.$Eh=S;class H{constructor(){this.a=!1,this.b=new Promise((t,i)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.$Fh=H;class ee extends H{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.$Gh=ee;function _(o,t){return t?new Promise((i,r)=>{const a=setTimeout(()=>{I.dispose(),i()},o),I=t.onCancellationRequested(()=>{clearTimeout(a),I.dispose(),r(new b.$8)})}):Y(i=>_(o,i))}function V(o,t=0,i){const r=setTimeout(()=>{o(),i&&a.dispose()},t),a=(0,g.$Vc)(()=>{clearTimeout(r),i?.deleteAndLeak(a)});return i?.add(a),a}function s(o){const t=[];let i=0;const r=o.length;function a(){return i<r?o[i++]():null}function I(ne){ne!=null&&t.push(ne);const le=a();return le?le.then(I):Promise.resolve(t)}return Promise.resolve(null).then(I)}function $(o,t=r=>!!r,i=null){let r=0;const a=o.length,I=()=>{if(r>=a)return Promise.resolve(i);const ne=o[r++];return Promise.resolve(ne()).then(ge=>t(ge)?Promise.resolve(ge):I())};return I()}function B(o,t=r=>!!r,i=null){if(o.length===0)return Promise.resolve(i);let r=o.length;const a=()=>{r=-1;for(const I of o)I.cancel?.()};return new Promise((I,ne)=>{for(const le of o)le.then(ge=>{--r>=0&&t(ge)?(a(),I(ge)):r===0&&I(i)}).catch(ge=>{--r>=0&&(a(),ne(ge))})})}class q{constructor(t){this.a=0,this.b=!1,this.f=t,this.g=[],this.d=0,this.h=new R.$ne}whenIdle(){return this.size>0?R.Event.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(t){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((i,r)=>{this.g.push({factory:t,c:i,e:r}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const t=this.g.shift();this.d++;const i=t.factory();i.then(t.c,t.e),i.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}}e.$Mh=q;class X extends q{constructor(){super(1)}}e.$Nh=X;class U{constructor(){this.a=new u,this.b=0}queue(t){return this.a.isRunning()?this.a.queue(()=>this.a.run(this.b++,t())):this.a.run(this.b++,t())}}e.$Oh=U;class p{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const t=new j;return this.b.add(t),t.p}g(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueSize(t,i=E.$0g){const r=i.getComparisonKey(t);return this.a.get(r)?.size??0}queueFor(t,i,r=E.$0g){const a=r.getComparisonKey(t);let I=this.a.get(a);if(!I){I=new X;const ne=this.f++,le=R.Event.once(I.onDrained)(()=>{I?.dispose(),this.a.delete(a),this.h(),this.d?.deleteAndDispose(ne),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new g.$7c),this.d.set(ne,le),this.a.set(a,I)}return I.queue(i)}h(){this.g()&&this.j()}j(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.j(),this.d?.dispose()}}e.$Ph=p;class re{constructor(t,i){this.b=!1,this.a=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel(),this.b=!0}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,i){if(this.b)throw new b.$fb("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},i)}setIfNotSet(t,i){if(this.b)throw new b.$fb("Calling 'setIfNotSet' on a disposed TimeoutTimer");this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},i))}}e.$Qh=re;class fe{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(t,i,r=globalThis){if(this.f)throw new b.$fb("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const a=r.setInterval(()=>{t()},i);this.d=(0,g.$Vc)(()=>{r.clearInterval(a),this.d=void 0})}dispose(){this.cancel(),this.f=!0}}e.$Rh=fe;class z{constructor(t,i){this.b=-1,this.a=t,this.d=i,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.$Sh=z;class ie{constructor(t,i){i%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.a=t,this.b=i,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.$Th=ie;class x extends z{constructor(t,i){super(t,i),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.$Uh=x;class ce extends g.$Xc{constructor(t,i){super(),this.g=t,this.h=i,this.a=[],this.b=this.B(new g.$Yc),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const i of t)this.a.push(i);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new z(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.$Vh=ce,function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?e.$Xh=(o,t)=>{(0,P.$B)(()=>{if(i)return;const r=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:e.$Xh=(o,t,i)=>{const r=o.requestIdleCallback(t,typeof i=="number"?{timeout:i}:void 0);let a=!1;return{dispose(){a||(a=!0,o.cancelIdleCallback(r))}}},e.$Wh=o=>(0,e.$Xh)(globalThis,o)}();class ae{constructor(t,i){this.g=!1,this.d=()=>{try{this.j=i()}catch(r){this.l=r}finally{this.g=!0}},this.f=(0,e.$Xh)(t,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}}e.$Yh=ae;class h extends ae{constructor(t){super(globalThis,t)}}e.$Zh=h;async function m(o,t,i){let r;for(let a=0;a<i;a++)try{return await o()}catch(I){r=I,await _(t)}throw r}class u{isRunning(t){return typeof t=="number"?this.a?.taskId===t:!!this.a}get running(){return this.a?.promise}cancelRunning(){this.a?.cancel()}run(t,i,r){return this.a={taskId:t,cancel:()=>r?.(),promise:i},i.then(()=>this.d(t),()=>this.d(t)),i}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}queue(t){if(this.b)this.b.run=t;else{const{promise:i,resolve:r,reject:a}=d();this.b={run:t,promise:i,promiseResolve:r,promiseReject:a}}return this.b.promise}hasQueued(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.$2h=u;class C{constructor(t,i=()=>Date.now()){this.d=t,this.f=i,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.$3h=C;var v;(function(o){o[o.Resolved=0]="Resolved",o[o.Rejected=1]="Rejected"})(v||(v={}));class j{get isRejected(){return this.d?.outcome===v.Rejected}get isResolved(){return this.d?.outcome===v.Resolved}get isSettled(){return!!this.d}get value(){return this.d?.outcome===v.Resolved?this.d?.value:void 0}constructor(){this.p=new Promise((t,i)=>{this.a=t,this.b=i})}complete(t){return new Promise(i=>{this.a(t),this.d={outcome:v.Resolved,value:t},i()})}error(t){return new Promise(i=>{this.b(t),this.d={outcome:v.Rejected,value:t},i()})}cancel(){return this.error(new b.$8)}}e.$4h=j;var N;(function(o){async function t(r){let a;const I=await Promise.all(r.map(ne=>ne.then(le=>le,le=>{a||(a=le)})));if(typeof a<"u")throw a;return I}o.settled=t;function i(r){return new Promise(async(a,I)=>{try{await r(a,I)}catch(ne){I(ne)}})}o.withAsyncBody=i})(N||(e.Promises=N={}));class w{get value(){return this.a}get error(){return this.b}get isResolved(){return this.d}constructor(t){this.a=void 0,this.b=void 0,this.d=!1,this.promise=t.then(i=>(this.a=i,this.d=!0,i),i=>{throw this.b=i,this.d=!0,i})}requireValue(){if(!this.d)throw new b.$fb("Promise is not resolved yet");if(this.b)throw this.b;return this.a}}e.$5h=w;class A{constructor(t){this.b=t,this.a=new L.$X(()=>new w(this.b()))}requireValue(){return this.a.value.requireValue()}getPromise(){return this.a.value.promise}get currentValue(){return this.a.rawValue?.value}}e.$6h=A;var D;(function(o){o[o.Initial=0]="Initial",o[o.DoneOK=1]="DoneOK",o[o.DoneError=2]="DoneError"})(D||(D={}));class T{static fromArray(t){return new T(i=>{i.emitMany(t)})}static fromPromise(t){return new T(async i=>{i.emitMany(await t)})}static fromPromises(t){return new T(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new T(async i=>{await Promise.all(t.map(async r=>{for await(const a of r)i.emitOne(a)}))})}static{this.EMPTY=T.fromArray([])}constructor(t,i){this.a=D.Initial,this.b=[],this.d=null,this.f=i,this.g=new R.$ne,queueMicrotask(async()=>{const r={emitOne:a=>this.h(a),emitMany:a=>this.j(a),reject:a=>this.l(a)};try{await Promise.resolve(t(r)),this.k()}catch(a){this.l(a)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===D.DoneError)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===D.DoneOK)return{done:!0,value:void 0};await R.Event.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,i){return new T(async r=>{for await(const a of t)r.emitOne(i(a))})}map(t){return T.map(this,t)}static filter(t,i){return new T(async r=>{for await(const a of t)i(a)&&r.emitOne(a)})}filter(t){return T.filter(this,t)}static coalesce(t){return T.filter(t,i=>!!i)}coalesce(){return T.coalesce(this)}static async toPromise(t){const i=[];for await(const r of t)i.push(r);return i}toPromise(){return T.toPromise(this)}h(t){this.a===D.Initial&&(this.b.push(t),this.g.fire())}j(t){this.a===D.Initial&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===D.Initial&&(this.a=D.DoneOK,this.g.fire())}l(t){this.a===D.Initial&&(this.a=D.DoneError,this.d=t,this.g.fire())}}e.$7h=T;class Z extends T{constructor(t,i){super(i),this.m=t}cancel(){this.m.cancel()}}e.$8h=Z;function se(o){const t=new k.$ye,i=o(t.token);return new Z(t,async r=>{const a=t.token.onCancellationRequested(()=>{a.dispose(),t.dispose(),r.reject(new b.$8)});try{for await(const I of i){if(t.token.isCancellationRequested)return;r.emitOne(I)}a.dispose(),t.dispose()}catch(I){a.dispose(),t.dispose(),r.reject(I)}})}class oe{constructor(t){this.a=new j,this.b=new T(a=>{if(i){a.reject(i);return}return r&&a.emitMany(r),this.d=I=>a.reject(I),this.f=I=>a.emitOne(I),this.a.p},t);let i,r;this.f=a=>{r||(r=[]),r.push(a)},this.d=a=>{i||(i=a)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(t){this.d(t),this.a.complete()}emitOne(t){this.f(t)}}e.$0h=oe}),define(ue[10],he([0,1,21,9,6,5,22,2,3,4]),function(Q,e,k,b,R,g,E,P,K,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$xk=e.$wk=void 0,e.$vk=W,e.$yk=n,e.$zk=U,e.$Ak=p,e.$Bk=re,e.$Ck=fe,e.$Dk=z,e.$Ek=ae;function W(){return Object.create(null)}e.$wk="**",e.$xk="/";const Y="[/\\\\]",G="[^/\\\\]",te=/\//g;function l(h,m){switch(h){case 0:return"";case 1:return`${G}*?`;default:return`(?:${Y}|${G}+${Y}${m?`|${Y}${G}+`:""})*?`}}function n(h,m){if(!h)return[];const u=[];let C=!1,v=!1,j="";for(const N of h){switch(N){case m:if(!C&&!v){u.push(j),j="";continue}break;case"{":C=!0;break;case"}":C=!1;break;case"[":v=!0;break;case"]":v=!1;break}j+=N}return j&&u.push(j),u}function c(h){if(!h)return"";let m="";const u=n(h,e.$xk);if(u.every(C=>C===e.$wk))m=".*";else{let C=!1;u.forEach((v,j)=>{if(v===e.$wk){if(C)return;m+=l(2,j===u.length-1)}else{let N=!1,w="",A=!1,D="";for(const T of v){if(T!=="}"&&N){w+=T;continue}if(A&&(T!=="]"||!D)){let Z;T==="-"?Z=T:(T==="^"||T==="!")&&!D?Z="^":T===e.$xk?Z="":Z=(0,L.$jf)(T),D+=Z;continue}switch(T){case"{":N=!0;continue;case"[":A=!0;continue;case"}":{const se=`(?:${n(w,",").map(oe=>c(oe)).join("|")})`;m+=se,N=!1,w="";break}case"]":{m+="["+D+"]",A=!1,D="";break}case"?":m+=G;continue;case"*":m+=l(1);continue;default:m+=(0,L.$jf)(T)}}j<u.length-1&&(u[j+1]!==e.$wk||j+2<u.length)&&(m+=Y)}C=v===e.$wk})}return m}const d=/^\*\*\/\*\.[\w\.-]+$/,M=/^\*\*\/([\w\.-]+)\/?$/,f=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,O=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,J=/^\*\*((\/[\w\.-]+)+)\/?$/,y=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,F=new E.$Gc(1e4),S=function(){return!1},H=function(){return null};function ee(h,m){if(!h)return H;let u;typeof h!="string"?u=h.pattern:u=h,u=u.trim();const C=`${u}_${!!m.trimForExclusions}`;let v=F.get(C);if(v)return _(v,h);let j;return d.test(u)?v=s(u.substr(4),u):(j=M.exec(V(u,m)))?v=$(j[1],u):(m.trimForExclusions?O:f).test(u)?v=B(u,m):(j=J.exec(V(u,m)))?v=q(j[1].substr(1),u,!0):(j=y.exec(V(u,m)))?v=q(j[1],u,!1):v=X(u),F.set(C,v),_(v,h)}function _(h,m){if(typeof m=="string")return h;const u=function(C,v){return(0,g.$Fg)(C,m.base,!K.$k)?h((0,L.$of)(C.substr(m.base.length),P.sep),v):null};return u.allBasenames=h.allBasenames,u.allPaths=h.allPaths,u.basenames=h.basenames,u.patterns=h.patterns,u}function V(h,m){return m.trimForExclusions&&h.endsWith("/**")?h.substr(0,h.length-2):h}function s(h,m){return function(u,C){return typeof u=="string"&&u.endsWith(h)?m:null}}function $(h,m){const u=`/${h}`,C=`\\${h}`,v=function(N,w){return typeof N!="string"?null:w?w===h?m:null:N===h||N.endsWith(u)||N.endsWith(C)?m:null},j=[h];return v.basenames=j,v.patterns=[m],v.allBasenames=j,v}function B(h,m){const u=ce(h.slice(1,-1).split(",").map(w=>ee(w,m)).filter(w=>w!==H),h),C=u.length;if(!C)return H;if(C===1)return u[0];const v=function(w,A){for(let D=0,T=u.length;D<T;D++)if(u[D](w,A))return h;return null},j=u.find(w=>!!w.allBasenames);j&&(v.allBasenames=j.allBasenames);const N=u.reduce((w,A)=>A.allPaths?w.concat(A.allPaths):w,[]);return N.length&&(v.allPaths=N),v}function q(h,m,u){const C=P.sep===P.$jc.sep,v=C?h:h.replace(te,P.sep),j=P.sep+v,N=P.$jc.sep+h;let w;return u?w=function(A,D){return typeof A=="string"&&(A===v||A.endsWith(j)||!C&&(A===h||A.endsWith(N)))?m:null}:w=function(A,D){return typeof A=="string"&&(A===v||!C&&A===h)?m:null},w.allPaths=[(u?"*/":"./")+h],w}function X(h){try{const m=new RegExp(`^${c(h)}$`);return function(u){return m.lastIndex=0,typeof u=="string"&&m.test(u)?h:null}}catch{return H}}function U(h,m,u){return!h||typeof m!="string"?!1:p(h)(m,void 0,u)}function p(h,m={}){if(!h)return S;if(typeof h=="string"||re(h)){const u=ee(h,m);if(u===H)return S;const C=function(v,j){return!!u(v,j)};return u.allBasenames&&(C.allBasenames=u.allBasenames),u.allPaths&&(C.allPaths=u.allPaths),C}return ie(h,m)}function re(h){const m=h;return m?typeof m.base=="string"&&typeof m.pattern=="string":!1}function fe(h){return h.allBasenames||[]}function z(h){return h.allPaths||[]}function ie(h,m){const u=ce(Object.getOwnPropertyNames(h).map(w=>x(w,h[w],m)).filter(w=>w!==H)),C=u.length;if(!C)return H;if(!u.some(w=>!!w.requiresSiblings)){if(C===1)return u[0];const w=function(T,Z){let se;for(let oe=0,o=u.length;oe<o;oe++){const t=u[oe](T,Z);if(typeof t=="string")return t;(0,b.$sh)(t)&&(se||(se=[]),se.push(t))}return se?(async()=>{for(const oe of se){const o=await oe;if(typeof o=="string")return o}return null})():null},A=u.find(T=>!!T.allBasenames);A&&(w.allBasenames=A.allBasenames);const D=u.reduce((T,Z)=>Z.allPaths?T.concat(Z.allPaths):T,[]);return D.length&&(w.allPaths=D),w}const v=function(w,A,D){let T,Z;for(let se=0,oe=u.length;se<oe;se++){const o=u[se];o.requiresSiblings&&D&&(A||(A=(0,P.$qc)(w)),T||(T=A.substr(0,A.length-(0,P.$rc)(w).length)));const t=o(w,A,T,D);if(typeof t=="string")return t;(0,b.$sh)(t)&&(Z||(Z=[]),Z.push(t))}return Z?(async()=>{for(const se of Z){const oe=await se;if(typeof oe=="string")return oe}return null})():null},j=u.find(w=>!!w.allBasenames);j&&(v.allBasenames=j.allBasenames);const N=u.reduce((w,A)=>A.allPaths?w.concat(A.allPaths):w,[]);return N.length&&(v.allPaths=N),v}function x(h,m,u){if(m===!1)return H;const C=ee(h,u);if(C===H)return H;if(typeof m=="boolean")return C;if(m){const v=m.when;if(typeof v=="string"){const j=(N,w,A,D)=>{if(!D||!C(N,w))return null;const T=v.replace("$(basename)",()=>A),Z=D(T);return(0,b.$sh)(Z)?Z.then(se=>se?h:null):Z?h:null};return j.requiresSiblings=!0,j}}return C}function ce(h,m){const u=h.filter(w=>!!w.basenames);if(u.length<2)return h;const C=u.reduce((w,A)=>{const D=A.basenames;return D?w.concat(D):w},[]);let v;if(m){v=[];for(let w=0,A=C.length;w<A;w++)v.push(m)}else v=u.reduce((w,A)=>{const D=A.patterns;return D?w.concat(D):w},[]);const j=function(w,A){if(typeof w!="string")return null;if(!A){let T;for(T=w.length;T>0;T--){const Z=w.charCodeAt(T-1);if(Z===R.CharCode.Slash||Z===R.CharCode.Backslash)break}A=w.substr(T)}const D=C.indexOf(A);return D!==-1?v[D]:null};j.basenames=C,j.patterns=v,j.allBasenames=C;const N=h.filter(w=>!w.basenames);return N.push(j),N}function ae(h,m){return(0,k.$xb)(h,m,(u,C)=>typeof u=="string"&&typeof C=="string"?u===C:typeof u!="string"&&typeof C!="string"?u.base===C.base&&u.pattern===C.pattern:!1)}}),define(ue[15],he([0,1,23]),function(Q,e,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$3tc=void 0;const b=(R,g,E)=>{let P;if(R[0]===255&&R[1]===254)P=new TextDecoder("utf-16le").decode(R);else if(R[0]===254&&R[1]===255)P=new TextDecoder("utf-16be").decode(R);else if(P=new TextDecoder("utf8").decode(R),P.slice(0,1e3).includes("\uFFFD")&&R.includes(0))return[];const K=[],L=[];let W=null,Y=E.remainingResultQuota;for(;Y>=0&&(W=g.exec(P));)L.push({matchStartIndex:W.index,matchedText:W[0]}),Y--;if(L.length){const G=new Set,te=new Set,l=[],n=O=>P.slice(l[O].start,l[O].end);let c=0,d=null;const M=/\r?\n/g;for(;d=M.exec(P);)l.push({start:c,end:d.index}),c=d.index+d[0].length;c<P.length&&l.push({start:c,end:P.length});let f=0;for(const{matchStartIndex:O,matchedText:J}of L){if(Y<0)break;for(;l[f+1]&&O>l[f].end;)f++;let y=f;for(;l[y+1]&&O+J.length>l[y].end;)y++;if(E.beforeContext)for(let V=Math.max(0,f-E.beforeContext);V<f;V++)G.add(V);let F="",S=0;for(let V=f;V<=y;V++){let s=n(V);E.previewOptions?.charsPerLine&&s.length>E.previewOptions.charsPerLine&&(S=Math.max(O-l[f].start-20,0),s=s.substr(S,E.previewOptions.charsPerLine)),F+=`${s}
`,te.add(V)}const H=new k.$Mt(f,O-l[f].start,y,O+J.length-l[y].start),ee=new k.$Mt(0,O-l[f].start-S,y-f,O+J.length-l[y].start-(y===f?S:0)),_={ranges:H,preview:{text:F,matches:ee}};if(K.push(_),E.afterContext)for(let V=y+1;V<=Math.min(y+E.afterContext,l.length-1);V++)G.add(V)}for(const O of G)te.has(O)||K.push({text:n(O),lineNumber:O+1})}return K};e.$3tc=b}),define(ue[16],he([0,1,10]),function(Q,e,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Dsb=void 0,k=de(k);class b{constructor(g,E,P){if(this.b=E,this.c=P,E[E.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");E[E.length-1]!=="/"&&(E+="/"),this.a=this.e(g,this.b,this.c)}updateContents(g){this.a=this.e(g,this.b,this.c)}isPathIncludedInTraversal(g,E){if(g[0]!=="/"||g[g.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+g);return!this.a(g,E)}isArbitraryPathIgnored(g,E){if(g[0]!=="/"||g[g.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+g);const P=g.split("/").filter(W=>W);let K=!1,L="";for(let W=0;W<P.length;W++){const Y=W===P.length-1,G=P[W];if(L=L+"/"+G,!this.isPathIncludedInTraversal(L,Y?E:!0)){K=!0;break}}return K}d(g,E,P){const K=g.map(W=>this.f(W,E)),L=Object.create(null);for(const W of K)L[W]=!0;return k.$Ak(L,{trimForExclusions:P})}e(g,E,P){const K=g.split(`
`).map(f=>f.trim()).filter(f=>f&&f[0]!=="#"),L=K.filter(f=>!f.endsWith("/")),W=L.filter(f=>!f.includes("!")),Y=this.d(W,E,!0),G=L.filter(f=>f.includes("!")).map(f=>f.replace(/!/g,"")),te=this.d(G,E,!1),l=K.filter(f=>!f.includes("!")),n=this.d(l,E,!0),c=K.filter(f=>f.includes("!")).map(f=>f.replace(/!/g,"")),d=this.d(c,E,!1);return(f,O)=>f.startsWith(E)?O&&n(f)&&!d(f)||Y(f)&&!te(f)?!0:P?P.a(f,O):!1:!1}f(g,E){const P=g.indexOf("/");return P===-1||P===g.length-1?g="**/"+g:(P===0?E.slice(-1)==="/"&&(g=g.slice(1)):E.slice(-1)!=="/"&&(g="/"+g),g=E+g),g}}e.$Dsb=b}),define(ue[24],he([0,1,10,7,2,14,15,16,4,9,8]),function(Q,e,k,b,R,g,E,P,K,L,W){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=void 0,e.create=n,k=de(k),R=de(R);const Y=!1,G=+new Date,te={},l=async(y,F)=>{if(!Y)return F();const S=Date.now(),H=(te[y]??0)+1;console.info(y,H,"starting",Math.round((S-G)*10)/1e4),te[y]=H;const ee=await F(),_=Date.now();return console.info(y,H,"took",_-S),ee};function n(y){return new c(y)}class c{constructor(F){this.d=F,this.cancellationTokens=new Map}cancelQuery(F){this.cancellationTokens.get(F)?.cancel()}g(F){const S=new g.$ye;return this.cancellationTokens.set(F,S),S}async listDirectory(F,S,H,ee,_){const V=M(H),s=new W.$9g(()=>ee),$=this.g(_),B=[];let q=!1,X=0;const U=S.maxResults||512,p=S.filePattern?re=>S.filePattern.split("").every(fe=>re.includes(fe)):re=>!0;return await l("listDirectory",()=>this.h(F,f(S),V,s,re=>{if(p(re.name))return X++,U&&X>U&&(q=!0,$.cancel()),B.push(re.path)},$.token)),{results:B,limitHit:q}}async searchDirectory(F,S,H,ee,_){const V=M(H),s=new W.$9g(()=>ee);return l("searchInFiles",async()=>{const $=this.g(_),B=[],q=d(S.contentPattern),X=[];let U=0,p=0;const re=!1,fe=async z=>{if($.token.isCancellationRequested)return;U++;const ie=await z.resolve();if($.token.isCancellationRequested)return;const x=new Uint8Array(ie),ce=(0,E.$3tc)(x,q,{afterContext:S.afterContext??0,beforeContext:S.beforeContext??0,previewOptions:S.previewOptions,remainingResultQuota:S.maxResults?S.maxResults-p:1e4});if(ce.length){p+=ce.length,S.maxResults&&p>S.maxResults&&$.cancel();const ae={resource:b.URI.joinPath(V.folder,z.path),results:ce};this.d.sendTextSearchMatch(ae,_),B.push(ae)}};return await l("walkFolderToResolve",()=>this.h(F,f(S),V,s,async z=>X.push(fe(z)),$.token)),await l("resolveOngoingProcesses",()=>Promise.all(X)),Y&&console.log("Searched in",U,"files"),{results:B,limitHit:re}})}async h(F,S,H,ee,_,V){const s=k.$Ak(H.excludePattern??{},{trimForExclusions:!0}),$=(z,ie,x)=>(z=z.slice(1),!!(s(z,ie,x)||O(S,z))),B=(z,ie,x)=>(z=z.slice(1),!(s(z,ie,x)||!J(S,z,ee))),q=(z,ie)=>({type:"file",name:z.name,path:ie,resolve:()=>z.getFile().then(ce=>ce.arrayBuffer())}),X=z=>z.kind==="directory",U=z=>z.kind==="file",p=async(z,ie,x)=>{if(!H.disregardIgnoreFiles){const ae=await Promise.all([z.getFileHandle(".gitignore").catch(h=>{}),z.getFileHandle(".ignore").catch(h=>{})]);await Promise.all(ae.map(async h=>{if(!h)return;const m=new TextDecoder("utf8").decode(new Uint8Array(await(await h.getFile()).arrayBuffer()));x=new P.$Dsb(m,ie,x)}))}const ce=L.Promises.withAsyncBody(async ae=>{const h=[],m=[],u=[],C=new Set;for await(const v of z.entries())u.push(v),C.add(v[0]);for(const[v,j]of u){if(V.isCancellationRequested)break;const N=ie+v;if(x&&!x.isPathIncludedInTraversal(N,j.kind==="directory"))continue;const w=A=>C.has(A);X(j)&&!$(N,v,w)?m.push(p(j,N+"/",x)):U(j)&&B(N,v,w)&&h.push(q(j,N))}ae([...await Promise.all(m),...h])});return{type:"dir",name:z.name,entries:ce}},re=async(z,ie)=>{V.isCancellationRequested||await Promise.all((await z.entries).sort((x,ce)=>-(x.type==="dir"?0:1)+(ce.type==="dir"?0:1)).map(async x=>x.type==="dir"?re(x,ie):ie(x)))},fe=await l("process",()=>p(F,"/"));await l("resolve",()=>re(fe,_))}}e.LocalFileSearchSimpleWorker=c;function d(y){return(0,K.$sf)(y.pattern,!!y.isRegExp,{wholeWord:y.isWordMatch,global:!0,matchCase:y.isCaseSensitive,multiline:!0,unicode:!0})}function M(y){return{...y,folder:b.URI.revive(y.folder)}}function f(y){return{...y,extraFileResources:y.extraFileResources?.map(F=>b.URI.revive(F)),folderQueries:y.folderQueries.map(F=>M(F))}}function O(y,F){return!!(y.excludePattern&&k.$zk(y.excludePattern,F))}function J(y,F,S){return y.excludePattern&&k.$zk(y.excludePattern,F)?!1:y.includePattern||y.usingSearchPaths?y.includePattern&&k.$zk(y.includePattern,F)?!0:y.usingSearchPaths?!!y.folderQueries&&y.folderQueries.some(H=>{const ee=H.folder,_=b.URI.file(F);if(S.isEqualOrParent(_,ee)){const V=R.$oc(ee.path,_.path);return!H.includePattern||!!k.$zk(H.includePattern,V)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/f1e16e1e6214d7c44d078b1f0607b2388f29d729/core/vs/workbench/services/search/worker/localFileSearch.js.map
